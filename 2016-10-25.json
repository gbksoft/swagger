{
   "wsagger": "0.0.2",
   "info": {
      "description": "API for GBK chat",
      "version": "1.0.0",
      "title": "GBKSOFT chat API"
   },

   "server" : {
      "proto": "socket.io",
      "host": "chat-nodejs.dev.gbksoft.net",
      "port": "28781",
      "path": "/front_space"
   },
   

   "scenarios": [
       {
          "name": "connect to socket.io with tokenapi25",
          "summary": " ",
          "parameters": [
             {             
                "in": "formData",
                "name": "token",
                "description": "",
                "dataType": "string"
             }
          ],
          "operationId": "connect",
          "flow": [
             {
                "action": "connect", 
                "key": "api25", 
                "data": [{"token": "api25"}]
             }
          ]
       },

       {
          "name": "connect to socket.io as alexr",
          "summary": " ",
          "parameters": [
          ],
          "operationId": "connect",
          "flow": [
             {
                "action": "login_and_connect", 
                "key": "alexr", 
                "data": [{"username": "alexr", "password": "alexr"}]
             }
          ]
       },


       {
         "name": "create open group (777)",
         "summary": " ",
         "parameters": [
         ],
         "operationId": "",
         "flow": [        
             {
                "action": "request", 
                "key": "createGroup", 
                "data": [{"id": "777", "type": "open"}]
             }
         ]
       },


       {
         "name": "send message to common group",
         "summary": " ",
          "parameters": [
             {
                "in": "formData",
                "name": "messageText",
                "description": "group message text",
                "dataType": "string"
             },
             {
                "in": "formData",
                "name": "groupId",
                "description": "group id",
                "dataType": "string"
             }
          ],
          "condition": "connect",
          "operationId": "",
          "flow": [
             {
                "action": "request", 
                "key": "sendMessage", 
                "data": [{"messageText": "@", "type": "group", "groupId": "1"}]
             }
          ]
       },

       {
         "name": "changeGroup (777)",
         "summary": " ",
         "parameters": [
         ],
         "operationId": "",
         "flow": [        
             {
                "action": "request", 
                "key": "changeGroup", 
                "data": ["777"]
             }
         ]
       },     

       {
         "name": "changeGroup (2)",
         "summary": " ",
         "parameters": [
         ],
         "operationId": "",
         "flow": [        
             {
                "action": "request", 
                "key": "changeGroup", 
                "data": ["2"]
             }
         ]
       },     

       {
          "name": "setReaded all from tokenapi25",
          "summary": " ",
          "parameters": [
          ],
          "operationId": "",
          "condition": "connect",
          "flow": [
             {
                "action": "request", 
                "key": "setReaded", 
                "data": [{"senderId": "tokenapi25"}]
             }
          ]
       },
 
       {
          "name": "sendUserMessage to alexr",
          "summary": " ",
          "parameters": [
          ],
          "operationId": "",
          "condition": "connect",
          "flow": [
             {
                "action": "request", 
                "key": "sendMessage", 
                "data": [{"messageText": "text to alexr: {{messageText}}", "type": "user", "recipientId": "6"}]
             }
          ]
       },

       {
          "name": "sendUserMessage to tokenapi25",
          "summary": " ",
          "parameters": [
          ],
          "operationId": "",
          "condition": "connect",
          "flow": [
             {
                "action": "request", 
                "key": "sendMessage", 
                "data": [{"messageText": "text to tokenapi25: {{messageText}}", "type": "user", "recipientId": "tokenapi25"}]
             }
          ]
       }
    ]
}

