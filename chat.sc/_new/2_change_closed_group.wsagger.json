{
   "wsagger": "0.0.3",
   "info": {
      "description": "GBKSOFT chat API",
      "version": "1.0.0",
      "title": "GBKSOFT chat API"
   },
   "server_" : {
      "loc":  { "proto": "socket.io", "host": "127.0.0.1",                    "port": "28780", "path": "/front_space" },
      "dev":  { "proto": "socket.io", "host": "chat-nodejs.dev.gbksoft.net",  "port": "28781", "path": "/front_space" },
      "test": { "proto": "socket.io", "host": "chat-nodejs.test.gbksoft.net", "port": "28782", "path": "/front_space" },
      "live": { "proto": "socket.io", "host": "chat-nodejs.live.gbksoft.net", "port": "28783", "path": "/front_space" }
   },

   "user_" : {
       "2":  { "token": "2" },
       "3":  { "token": "3" }
   },

   "scenarios": [
       {
          "name": "change group",
          "parameters": [
             { "in": "formData", "name": "token", "description": "", "dataType": "string" },
             { "in": "!!!!!!!!", "name": "messageText", "description": "", "dataType": "string" }
          ],
          
          "flow": [
          
            { "worker": "2",  "action": "connect", "data": [{"token": "2"}], 
              "waitForResponse": { "delay": 3000, "data": [["connected", {}], ["messageGroup", {"messageText" : "{{messageText}}"}]] }},

            { "action": "connect", "data": [{"token": "{{token}}"}], 
              "waitForResponse": { "delay": 3000, "data": [["connected", {}]] }},             
            { "action": "request", "data": ["sendMessage", {"type": "group", "groupId": "0", "messageText": "{{messageText}}"}], 
              "waitForResponse": { "delay": 3000, "data": [["message", {}]] }}



             { "action": "connect", "data": [{"token": "{{token}}"}],
               "waitForResponse": { "delay": 3000, "data": [["connected", {}]] }},

             { "action": "request", "data": ["createGroup", {"name": "{{groupName}}", "type": "closed"}], 
               "waitForResponse": { "delay": 3000, "data": [["newGroup",  {"id": "{{!groupId}}", "usersCnt": 1, "name": "{{groupName}}"}]] }},

             { "action": "request", "data": ["changeGroup", "{{groupId}}"], 
               "waitForResponse": { "delay": 3000, "data": [["joinedTo",  {"groupId": "{{groupId}}"}]] }},

             { "action": "request", "data": ["changeGroup", "{{groupId}}"], 
               "waitForResponse": { "delay": 3000, "data": [["serverError",  {"type": "the same group"}]] }},

             { "action": "request", "data": ["changeGroup", "-1"], 
               "waitForResponse": { "delay": 3000, "data": [["serverError",  {"type": "no such group"}]] }}
          ]
       }
    ]
}
