{
   "wsagger": "0.0.3",
   "info": {
      "description": "GBKSOFT chat API",
      "version": "1.1.0",
      "title": "GBKSOFT chat API"
   },

   "REST_" : {
      "loc":  { "proto": "http://", "host": "localhost",                    "port": "28780", "path": "/rest" },
      "dev":  { "proto": "http://", "host": "chat-nodejs.dev.gbksoft.net",  "port": "28781", "path": "/rest" },
      "test": { "proto": "http://", "host": "chat-nodejs.test.gbksoft.net", "port": "28782", "path": "/rest" },
      "live": { "proto": "http://", "host": "chat-nodejs.live.gbksoft.net", "port": "28783", "path": "/rest" }
   },

   "server_" : {
      "loc":  { "proto": "socket.io", "host": "127.0.0.1",                    "port": "28780", "path": "/front_space" },
      "dev":  { "proto": "socket.io", "host": "chat-nodejs.dev.gbksoft.net",  "port": "28781", "path": "/front_space" },
      "test": { "proto": "socket.io", "host": "chat-nodejs.test.gbksoft.net", "port": "28782", "path": "/front_space" },
      "live": { "proto": "socket.io", "host": "chat-nodejs.live.gbksoft.net", "port": "28783", "path": "/front_space" }
   },

   "user_" : {
       "pavlo":      { "username": "pavlo",    "password": "pavlo" },
       "alexr":      { "username": "alexr",    "password": "alexr" },
       "roman":      { "username": "roman",    "password": "roman" },
       "olexandr":   { "username": "olexandr", "password": "olexandr" },
       "petr":       { "username": "petr",     "password": "petr" }
   },

   "scenarios": [
       {
          "name": "block open group",
          "parameters": [
          ],
          "flow": [
             { "action": "login_and_connect", "data": [{"path": "/v1/user/login", "queryData": "username={{username}}&password={{password}}"}],
               "wait": { "delay": 3000, "expected": [["connected", {}]] }
             },

             { "action": "request", "data": ["createGroup", {"name": "{{groupName}}", "type": "open"}],
               "wait": { "delay": 3000, "expected": [["newGroup",  {"id": "{{!groupId}}", "name": "{{groupName}}"}]] }
             },

             { "action": "request", "data": ["blockGroup", {"groupId": "{{groupId}}", "reason": "reason"}],
               "wait": { "delay": 3000, "expected": [["groupIsBlocked",  {"groupId": "{{groupId}}", "reason": "reason"}]] }
             },

             { "action": "request", "data": ["changeGroup", "{{groupId}}"],
               "wait": { "delay": 3000, "expected": [["serverError",  {"type": "group is blocked"}]] }
             },

             { "action": "request", "data": ["unblockGroup", {"groupId": "{{groupId}}", "reason": "reason"}],
               "wait": { "delay": 3000, "expected": [["groupIsUnblocked",  {"groupId": "{{groupId}}", "reason": "reason"}]] }
             },

             { "action": "request", "data": ["changeGroup", "{{groupId}}"],
               "wait": { "delay": 3000, "expected": [["joinedTo",  {"groupId": "{{groupId}}"}]] }
             }

          ]
       }
    ]
}
