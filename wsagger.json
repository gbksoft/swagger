{
   "wsagger": "0.0.2",
   "info": {
      "description": "API for GBK chat",
      "version": "1.0.0",
      "title": "GBKSOFT chat API"
   },

   "server" : {
      "proto": "socket.io",
      "host": "localhost",
      "port": "28780",
      "path": "/front_space"
   },
   
   "scenarios": [
       {
          "name": "connect to socket.io",
          "summary": " ",
          "parameters": [
             {             
                "in": "formData",
                "name": "namespace",
                "description": "connect to socket.io",
                "dataType": "string"
             }
          ],
          "operationId": "connect",
          "flow": [
             {
                "action": "connect", 
                "key": "@", 
                "data": []
             }
          ]
       },
       {
          "name": "sendBroadcastMessage",
          "summary": " ",
          "parameters": [
             { 
               "in": "formData",
               "name": "messageText",
               "description": "broadcast message text",
                "dataType": "string"
             }
          ],
          "condition": "connect",
          "operationId": "",
          "flow": [
             {
                "action": "request", 
                "key": "sendMessage", 
                "data": [{"messageText": "@", "type": "broadcast"}]
             }
          ]
       },
       {
          "name": "sendGroupMessage",
          "summary": " ",
          "parameters": [
             {
                "in": "formData",
                "name": "messageText",
                "description": "group message text",
                "dataType": "string"
             },
             {
                "in": "formData",
                "name": "groupId",
                "description": "group id",
                "dataType": "string"
             }
          ],
          "condition": "connect",
          "operationId": "",
          "flow": [
             {
                "action": "request", 
                "key": "changeGroup", 
                "data": ["@"]
             },
             {
                "action": "response", 
                "key": "message", 
                "data": [{"messageText": "@", "groupId": "@"}]
             }
          ]
       },
       {
          "name": "sendUserMessage",
          "summary": " ",
          "parameters": [
             {
                "in": "formData",
                "name": "messageText",
                "description": "user message text",
                "dataType": "string"
             },
             {
                "in": "formData",
                "name": "recipientId",
                "description": "recipient id",
                "dataType": "string"
             }
          ],
          "operationId": "",
          "condition": "connect",
          "flow": [
             {
                "action": "request", 
                "key": "sendMessage", 
                "data": [{"messageText": "@", "type": "user", "recipientId": "@"}]
             }
          ]
       }   
    ]
}

