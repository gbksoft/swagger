{
  "wsagger": "0.0.3",
  "info": {
      "description": "GBKSOFT chat API",
      "version": "1.1.0",
      "title": "GBKSOFT chat API"
  },


  "name": "send image url",

  "data": [
    { 
      "action"  : "call.callWsaggerFile",
      "data"    : [ "login_and_connect.wsagger.json", "{{REST.proto}}", "{{REST.host}}", "{{REST.port}}", "{{REST.path}}", "alexr", "", "{{server.proto}}", "{{server.host}}",  "{{server.port}}", "{{server.path}}" ],
      "wait"    : { "delay": 30000 }, 
      "expected": { "doer.socket_io": {} },
      "dataOut" : [ "doer.socket_io", "userId" ]
    },


    {
      "action"   : "socket_io.emit",
      "data"     : ["sendMessage", {"type": "user", "recipientId": "2", "messageText": "!!!", "structuredData": "{\"url\": \"http://infomincer.net/i2/top_I.jpg\", \"contentType\": \"image/jpeg\"}"}],

      "expected" : [
        [ "messageUser", { "messageText": "!!!", "messageId": "{{!messageId}}" }]
 
      ], 
      "wait" : { "delay": 3000 }


    },
   
    {
      "expected" : [
        [ "messageAdd",  { "messageId": "{{messageId}}", "preview": {"contentType": "image/jpeg"} } ]
 
      ], 
      "wait" : { "delay": 30000 }

    }

  ]
}
