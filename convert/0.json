{
	"swagger":"2.0",
	"info": {
	   "title":"GAMBLING GAME API",
	   "version":"1.0.4",
	   "description":""
	},
   "basePath": "/rest",
   "schemes": ["https"],
   "paths": {
   	"/v1/connections": {
   		"post": {
   			"summary": "Create connection for current token",
   			"tags": ["Node"], 
   			"consumes": ["application/json"],
   			"produces": ["application/json"],
   			"operationId": "userCreateConnection",
   			"parameters": [
   				{ 
   					"in": "body",
   					"name":"body",
   					"required": true,
   					"description": "",
   					"schema": {
   						"properties": {
   							"connection_id": {
   							   "type": "string"
   							}
   						}
   					}
   				}
   			],
   			"responses": {
   				"200": {
   					"description": "OK", 
   					"schema": {
   					   "$ref": "#/definitions/Success200Empty"
   					}
   				},

   				"401": {
   				   "description": "Unauthorized"
   				},

   				"422": {
   					"description": "Data Validation Failed.",
   					"schema": {
   					   "$ref": "#/definitions/ErrorModel"
   					}
   				}
   			}
   		},

   		"delete": {
   			"summary": "Delete connection",
   			"tags": ["Node"],
   			"consumes": ["application/json"],
   			"produces": ["application/json"],
   			"operationId": "userDeleteConnection",
   			"parameters": [],
   			"responses": {
   				"200": {
   					"description": "OK",
   					"schema": {
   					   "$ref": "#/definitions/Success200Empty"
   					}
   				},

   				"401": {
   				   "description": "Unauthorized"
   				}
   			}
   		}
   	},

   	"/v1/users/login/{type}": {
         "post": {
            "summary":"Create access token for APP using social account","description":"<p><b>facebook:</b> <a href='https://developers.facebook.com/tools/accesstoken/'>https://developers.facebook.com/tools/accesstoken/</a></p><p><b>google+:</b> <a href='https://developers.google.com/oauthplayground/'>https://developers.google.com/oauthplayground/</a></p><br><p>For IOS needed \"device_id\" header.</p>",
            "tags": ["AnyBody"],
            "consumes": ["application/json"],
            "produces": ["application/json"],
            "operationId": "userCreateAccessTokenUsingSocialAccount",
            "parameters": [
               {"in":"path","name":"type","type":"string","enum":["facebook","google"],"required":true},

               {
                  "in": "body",
                  "name": "body",
                  "required": true,
                  "description": "Get code facebook example: https://www.facebook.com/dialog/oauth?client_id={client_id}&redirect_uri={redirect_uri}&scope={scope}",
                  "schema":{
                     "properties": {
                        "token": {
                           "type": "string"
                        }
                     }
                  }
               }
            ],
            "responses": {"200":{"description":"OK","schema":{"$ref":"#/definitions/User"}},"400":{"description":"Bad Request."}}
         }
      },

      "/v1/users/login": {
         "post": {
            "summary":"Create access token for APP","description":"<p>For IOS needed \"device_id\" header.</p>",
            "tags":["AnyBody"],"consumes":["application/json"],"produces":["application/json"],"operationId":"userCreateAccessToken",
            "parameters":[
               {
                  "in":"body","name":"body","required":true,
                  "schema":{
                     "properties":{"email":{"type":"string","description":"Minimum 2, maximum 255 characters"},"password":{"type":"string","description":"Minimum 6, maximum 12 characters"}}}}
                  ],

                 "responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/User"}},"422":{"description":"Data Validation Failed.","schema":{"$ref":"#/definitions/ErrorModel"}}}}},

      "/v1/users/logout":{"post":{"summary":"Delete access token for APP","tags":["User"],"consumes":["application/json"],"produces":["application/json"],"operationId":"userDeleteAccessToken","parameters":[],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/Success200Empty"}},"401":{"description":"Unauthorized"},"404":{"description":"Not found."}}}},
      "/v1/games/{id}/again": {
         "put": {
            "summary": "Start game again (use timeout)",
            "tags": ["Game"],
            "consumes": ["application/json"],
            "produces": ["application/json"],
            "operationId": "userGameAgain",
            "parameters": [
               {
                  "in":"path",
                  "name":"id",
                  "type":"integer",
                  "required":true,
                  "description":"Game ID"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/Game"}},"401":{"description":"Unauthorized"},"404":{"description":"Game Not Found"},"422":{"description":"Data Validation Failed.","schema":{"$ref":"#/definitions/ErrorModel"}}}}},

      "/v1/games/{id}/reject":{"put":{"summary":"Reject games invite","tags":["Game"],"consumes":["application/json"],"produces":["application/json"],"operationId":"userGameReject","parameters":[{"in":"path","name":"id","type":"integer","required":true,"description":"Game ID"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/Success200Empty"}},"401":{"description":"Unauthorized"},"404":{"description":"Game Not Found"},"422":{"description":"Data Validation Failed.","schema":{"$ref":"#/definitions/ErrorModel"}}}}},

      "/v1/games/{id}/history": {
         "get": {
            "summary": "Getting match history",
            "tags": ["Game"],
            "consumes": ["application/json"],
            "produces": ["application/json"],
            "operationId": "userMatchHistory",
            "parameters": [
               {"in":"path","name":"id","type":"integer","required":true,"description":"Game ID"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/GameWithStage"}},"401":{"description":"Unauthorized"},"422":{"description":"Data Validation Failed.","schema":{"$ref":"#/definitions/ErrorModel"}}}}},"/v1/games/{id}/join":{"put":{"summary":"Join into the game","tags":["Game"],"consumes":["application/json"],"produces":["application/json"],"operationId":"userGameJoin","parameters":[{"in":"path","name":"id","type":"integer","required":true,"description":"Game ID"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/joinToGame"}},"401":{"description":"Unauthorized"},"422":{"description":"Data Validation Failed.","schema":{"$ref":"#/definitions/ErrorModel"}}}}},"/v1/games/{id}/stage":{"post":{"summary":"Create user stage for game","tags":["Game"],"consumes":["application/json"],"produces":["application/json"],"operationId":"userGameStageCreate","parameters":[{"in":"path","name":"id","type":"integer","required":true,"description":"Game ID"},{"in":"body","name":"body","required":true,"description":"Game type","schema":{"$ref":"#/definitions/MatchStageCreate"}}],"responses":{"102":{"description":"Processing"},"200":{"description":"OK","schema":{"$ref":"#/definitions/MatchStage"}},"401":{"description":"Unauthorized"},"422":{"description":"Data Validation Failed.","schema":{"$ref":"#/definitions/ErrorModel"}}}}},"/v1/games/friends/{id}":{"post":{"summary":"Start game with friend","tags":["Game"],"consumes":["application/json"],"produces":["application/json"],"operationId":"userFriendsGame","parameters":[{"in":"path","name":"id","type":"integer","required":true},{"in":"body","name":"body","required":true,"description":"Game type","schema":{"type":"object","required":["type"],"properties":{"type":{"type":"string","enum":["gambling","free"]},"rate":{"type":"number","format":"integer","enum":[1000,100,1],"description":"rate in Penny (1GBP = 100Penny)"}}}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/Game"}},"401":{"description":"Unauthorized"},"422":{"description":"Data Validation Failed.","schema":{"$ref":"#/definitions/ErrorModel"}}}}},"/v1/notifications/{id}/read":{"post":{"summary":"Set status read to notification","tags":["Notification"],"consumes":["application/json"],"produces":["application/json"],"operationId":"readNotification","parameters":[{"in":"path","name":"id","type":"integer","required":true}],"responses":{"200":{"description":"OK","schema":{"type":"array","items":{"$ref":"#/definitions/Success200Empty"}}},"401":{"description":"Unauthorized"},"404":{"description":"Not found"}}}},"/v1/notifications/{id}":{"delete":{"summary":"Delete notification","tags":["Notification"],"consumes":["application/json"],"produces":["application/json"],"operationId":"readNotification","parameters":[{"in":"path","name":"id","type":"integer","required":true}],"responses":{"200":{"description":"OK","schema":{"type":"array","items":{"$ref":"#/definitions/Success200Empty"}}},"401":{"description":"Unauthorized"},"404":{"description":"Not found"}}}},"/v1/users/friends/{type}":{"get":{"summary":"Get friends list","tags":["User"],"consumes":["application/json"],"produces":["application/json"],"operationId":"userFriendsList","parameters":[{"in":"path","name":"type","type":"string","enum":["facebook","krok","previous"],"required":true},{"in":"query","type":"integer","name":"page","description":"Page id"},{"in":"query","type":"integer","name":"per-page","description":"Count items on page"}],"responses":{"200":{"description":"OK","schema":{"type":"array","items":{"$ref":"#/definitions/UserFriend"}}},"401":{"description":"Unauthorized"}}}},"/v1/users/friends/{type}/{id}":{"post":{"summary":"Add user to friends list","tags":["User"],"consumes":["application/json"],"produces":["application/json"],"operationId":"userFriendsList","parameters":[{"in":"path","name":"type","type":"string","enum":["krok"],"required":true},{"in":"path","name":"id","type":"integer","required":true}],"responses":{"200":{"description":"OK","schema":{"type":"array","items":{"type":"object","properties":{"user":{"$ref":"#/definitions/UserPublic"},"friend":{"$ref":"#/definitions/UserPublic"}}}}},"401":{"description":"Unauthorized"},"404":{"description":"Not found"},"422":{"description":"Data Validation Failed.","schema":{"$ref":"#/definitions/ErrorModel"}}}}},"/v1/users/invite/{type}":{"put":{"summary":"Create invite for user","tags":["User"],"consumes":["application/json"],"produces":["application/json"],"operationId":"userCreateInvite","parameters":[{"in":"path","name":"type","type":"string","enum":["email"],"required":true},{"in":"body","name":"body","required":true,"description":"User ID in social network or user email","schema":{"properties":{"uid":{"type":"string"}}}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/Success200Empty"}},"401":{"description":"Unauthorized"},"422":{"description":"Data Validation Failed.","schema":{"$ref":"#/definitions/ErrorModel"}}}}},"/v1/users/search":{"get":{"summary":"Get users by email for autocomplete","tags":["User"],"consumes":["application/json"],"produces":["application/json"],"operationId":"userListForAutocomplete","parameters":[{"in":"query","type":"string","name":"email","description":"email to search(min 2 symbols)"},{"in":"query","type":"integer","name":"page","description":"Page id"},{"in":"query","type":"integer","name":"per-page","description":"Count items on page"}],"responses":{"200":{"description":"OK","schema":{"type":"array","items":{"$ref":"#/definitions/UserFriend"}}},"401":{"description":"Unauthorized"}}}},"/v1/users":{"post":{"summary":"Create user for APP","description":"Create user for APP via e-mail and password","tags":["AnyBody"],"consumes":["application/json"],"produces":["application/json"],"operationId":"userCreate","parameters":[{"in":"body","name":"body","required":true,"schema":{"properties":{"email":{"type":"string","description":"Minimum 2, maximum 255 characters"},"password":{"type":"string","description":"Minimum 6, maximum 12 characters"}}}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/Success200Empty"}},"422":{"description":"Data Validation Failed.","schema":{"$ref":"#/definitions/ErrorModel"}}}},"patch":{"summary":"Update current user for APP","tags":["User"],"consumes":["application/json"],"produces":["application/json"],"operationId":"userCurrentUpdate","parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/UserUpdate"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/User"}},"401":{"description":"Unauthorized"},"422":{"description":"Data Validation Failed.","schema":{"$ref":"#/definitions/ErrorModel"}}}}},"/v1/emails/confirm":{"put":{"tags":["Email"],"summary":"Confirm e-mail by token","operationId":"userConfirmEmail","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","required":true,"description":"Token for confirm email","schema":{"properties":{"token":{"type":"string"}}}}],"responses":{"200":{"description":"Successful operation.","schema":{"$ref":"#/definitions/Success200Empty"}},"422":{"description":"Validation errors.","schema":{"$ref":"#/definitions/ErrorModel"}}}}},"/v1/emails/token":{"post":{"tags":["Email"],"summary":"Confirm email by token","operationId":"userConfirmEmailByToken","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","required":true,"description":"Email for getting token for confirm actions","schema":{"properties":{"email":{"type":"string"}}}}],"responses":{"200":{"description":"Successful operation.","schema":{"$ref":"#/definitions/Success200Empty"}},"422":{"description":"Validation errors.","schema":{"$ref":"#/definitions/ErrorModel"}}}}},"/v1/users/current":{"get":{"summary":"Current user for APP","tags":["User"],"consumes":["application/json"],"produces":["application/json"],"operationId":"userCurrent","parameters":[],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/User"}},"401":{"description":"Unauthorized"}}}},"/v1/passwords/reset":{"put":{"tags":["Password"],"summary":"User reset password send token","operationId":"userResetPasswordSendToken","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","required":true,"description":"E-mail of user to send token","schema":{"properties":{"email":{"type":"string","description":"Minimum 6, maximum 12 characters"}}}}],"responses":{"200":{"description":"Successful operation.","schema":{"$ref":"#/definitions/Success200Empty"}},"422":{"description":"Validation errors.","schema":{"$ref":"#/definitions/ErrorModel"}}}}},"/v1/passwords":{"post":{"tags":["Password"],"summary":"User reset password by token","operationId":"user-reset-password","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","required":true,"description":"E-mail of user to send token","schema":{"properties":{"token":{"type":"string","description":"Token from e-mail"},"password":{"type":"string","description":"New password for reset (Minimum 6, maximum 12 characters)"}}}}],"responses":{"200":{"description":"Successful operation.","schema":{"$ref":"#/definitions/Success200Empty"}},"422":{"description":"Validation errors.","schema":{"$ref":"#/definitions/ErrorModel"}}}}},"/v1/profile-identity":{"post":{"summary":"Create profile for user","description":"Create profile for user. User token in header required.","tags":["User"],"consumes":["application/json"],"produces":["application/json"],"operationId":"userProfileCreate","parameters":[{"in":"body","name":"body","required":true,"description":"E-mail of user to send token","schema":{"$ref":"#/definitions/ProfileIdentitySet"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/ProfileIdentitySet"}},"401":{"description":"Authorization Error.","schema":{"$ref":"#/definitions/InvalidTokenResponse401"}},"422":{"description":"Data Validation Failed.","schema":{"$ref":"#/definitions/ErrorModel"}}}},"get":{"summary":"Get profile identity of user","description":"Get profile identity of user. User token in header required.","tags":["User"],"consumes":["application/json"],"produces":["application/json"],"operationId":"userProfileGet","parameters":[],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/ProfileIdentity"}},"401":{"description":"Authorization Error.","schema":{"$ref":"#/definitions/InvalidTokenResponse401"}},"422":{"description":"Data Validation Failed.","schema":{"$ref":"#/definitions/ErrorModel"}}}}}},"definitions":{"Success200Empty":{"title":"200 OK","type":"object","required":["code","status","result"],"properties":{"code":{"type":"string","example":"200"},"result":{"type":"array","items":[]},"status":{"type":"string","example":"success"}}},"InvalidTokenResponse401":{"title":"401 Unauthorized","type":"object","required":["code","status","message","result"],"properties":{"code":{"type":"string","example":"401"},"result":{"type":"array","items":[]},"status":{"type":"string","example":"error"},"message":{"type":"string","example":"You are requesting with an invalid credential."}}},"ErrorModel":{"type":"object","required":["code","status","result"],"properties":{"code":{"type":"integer"},"status":{"type":"string"},"result":{"type":"array","items":{"minimum":1,"type":"object","required":["field","message"],"properties":{"field":{"type":"string"},"message":{"type":"string"}}}}}},"GameWithStage":{"type":"object","required":["id","type","winner_id","loser_id","stages","is_finish"],"properties":{"id":{"type":"integer"},"type":{"type":"string","enum":["gambling","free"]},"winner_id":{"type":"integer"},"loser_id":{"type":"integer"},"stages":{"type":"array","items":{"$ref":"#/definitions/MatchStage"}},"is_finish":{"type":"boolean"}}},"Game":{"type":"object","required":["id","type"],"properties":{"id":{"type":"integer"},"type":{"type":"integer","enum":["2","3"]},"rate":{"type":"integer"}}},"joinToGame":{"type":"object","required":["id","rate","user","opponent"],"properties":{"id":{"type":"integer"},"rate":{"$ref":"#/definitions/Rate"},"user":{"$ref":"#/definitions/UserPublic"},"opponent":{"$ref":"#/definitions/UserPublic"}}},"Rate":{"type":"object","properties":{"type":{"type":"integer"},"value":{"type":"integer"}}},"MatchStageCreate":{"type":"object","required":["round_id","round_time","action"],"properties":{"round_id":{"type":"integer"},"round_time":{"type":"integer"},"action":{"type":"integer","example":"2-no action(timeout); 3-rock; 4-paper; 5-scissors;"}}},"MatchStage":{"type":"object","required":["game_id","game_status","round_status","score","rounds"],"properties":{"game_id":{"type":"integer"},"game_status":{"type":"string","example":"inprogress | success"},"round_status":{"type":"string","example":"inprogress | success"},"score":{"type":"object","properties":{"game_winner":{"type":"integer"},"current_round":{"type":"integer"},"users":{"type":"array","items":{"type":"object","properties":{"<userId>":{"type":"object","properties":{"win":{"type":"integer"},"lose":{"type":"integer"},"tie":{"type":"integer"}}}}}}}},"rounds":{"type":"array","items":{"type":"object","properties":{"index":{"type":"integer"},"winner":{"type":"integer"}}}}}},"Token":{"type":"object","required":["token","expired_at","device_id"],"properties":{"token":{"type":"string"},"expired_at":{"type":"integer","format":"int32"},"device_id":{"type":"string"}}},"ProfileIdentitySet":{"type":"object","required":["first_name","last_name","date_of_birth","line_one","line_two","city","country","post_code","is_agreement_accept"],"properties":{"first_name":{"type":"string","description":"Minimum 2, maximum 255 characters"},"last_name":{"type":"string","description":"Minimum 2, maximum 255 characters"},"date_of_birth":{"type":"string","description":"Format: DD-MM-YYYY"},"line_one":{"type":"string","description":"Minimum 2, maximum 255 characters"},"line_two":{"type":"string","description":"Minimum 2, maximum 255 characters"},"city":{"type":"string","description":"Minimum 2, maximum 255 characters"},"country":{"type":"string","description":"Minimum 2, maximum 255 characters"},"post_code":{"type":"string","description":"Minimum 2, maximum 45 characters"},"is_agreement_accept":{"type":"boolean","description":"User agreement"}}},"ProfileIdentity":{"type":"object","required":["status","first_name","last_name","date_of_birth","line_one","line_two","city","country","post_code"],"properties":{"status":{"type":"integer","description":""},"first_name":{"type":"string","description":"Minimum 2, maximum 255 characters"},"last_name":{"type":"string","description":"Minimum 2, maximum 255 characters"},"date_of_birth":{"type":"string","description":"Format: DD-MM-YYYY"},"line_one":{"type":"string","description":"Minimum 2, maximum 255 characters"},"line_two":{"type":"string","description":"Minimum 2, maximum 255 characters"},"city":{"type":"string","description":"Minimum 2, maximum 255 characters"},"country":{"type":"string","description":"Minimum 2, maximum 255 characters"},"post_code":{"type":"string","description":"Minimum 2, maximum 45 characters"}}},"UserUpdate":{"type":"object","required":["name","avatar_url"],"properties":{"name":{"type":"string"},"avatar_url":{"type":"string"}}},"UserPublic":{"type":"object","required":["id","first_name","last_name","email","avatar"],"properties":{"id":{"type":"integer"},"first_name":{"type":"string"},"last_name":{"type":"string"},"email":{"type":"string"},"avatar":{"type":"string"}}},"UserFriend":{"type":"object","required":["id","first_name","last_name","email","avatar","is_friend"],"properties":{"id":{"type":"integer"},"first_name":{"type":"string"},"last_name":{"type":"string"},"email":{"type":"string"},"avatar":{"type":"string"},"is_friend":{"type":"boolean"}}},"Balance":{"type":"object","properties":{"money":{"type":"number","format":"double"}}},"User":{"type":"object","required":["id","first_name","last_name","email","avatar","status","accessToken","balance"],"properties":{"id":{"type":"integer"},"first_name":{"type":"string"},"last_name":{"type":"string"},"email":{"type":"string"},"avatar":{"type":"string"},"status":{"type":"integer"},"accessToken":{"$ref":"#/definitions/Token"},"balance":{"$ref":"#/definitions/Balance"}}}}}